<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="A full- and high-speed `UsbBus` implementation"><title>BusAdapter in imxrt_usbd - Rust</title><script> if (window.location.protocol !== "file:") document.write(`<link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2">`)</script><link rel="stylesheet" href="../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../static.files/rustdoc-e935ef01ae1c1829.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="imxrt_usbd" data-themes="" data-resource-suffix="" data-rustdoc-version="1.78.0 (9b00956e5 2024-04-29)" data-channel="1.78.0" data-search-js="search-42d8da7a6b9792c2.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../static.files/storage-4c98445ec4002617.js"></script><script defer src="sidebar-items.js"></script><script defer src="../static.files/main-12cf3b4f4f9dc36d.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-04d5337699b92874.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc struct"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../imxrt_usbd/index.html">imxrt_usbd</a><span class="version">0.3.0</span></h2></div><h2 class="location"><a href="#">BusAdapter</a></h2><div class="sidebar-elems"><section><h3><a href="#implementations">Methods</a></h3><ul class="block method"><li><a href="#method.configure">configure</a></li><li><a href="#method.enable_zlt">enable_zlt</a></li><li><a href="#method.gpt_mut">gpt_mut</a></li><li><a href="#method.new">new</a></li><li><a href="#method.set_interrupts">set_interrupts</a></li><li><a href="#method.with_speed">with_speed</a></li><li><a href="#method.without_critical_sections">without_critical_sections</a></li></ul><h3><a href="#trait-implementations">Trait Implementations</a></h3><ul class="block trait-implementation"><li><a href="#impl-UsbBus-for-BusAdapter">UsbBus</a></li></ul><h3><a href="#synthetic-implementations">Auto Trait Implementations</a></h3><ul class="block synthetic-implementation"><li><a href="#impl-Freeze-for-BusAdapter">!Freeze</a></li><li><a href="#impl-RefUnwindSafe-for-BusAdapter">!RefUnwindSafe</a></li><li><a href="#impl-UnwindSafe-for-BusAdapter">!UnwindSafe</a></li><li><a href="#impl-Send-for-BusAdapter">Send</a></li><li><a href="#impl-Sync-for-BusAdapter">Sync</a></li><li><a href="#impl-Unpin-for-BusAdapter">Unpin</a></li></ul><h3><a href="#blanket-implementations">Blanket Implementations</a></h3><ul class="block blanket-implementation"><li><a href="#impl-Any-for-T">Any</a></li><li><a href="#impl-Borrow%3CT%3E-for-T">Borrow&lt;T&gt;</a></li><li><a href="#impl-BorrowMut%3CT%3E-for-T">BorrowMut&lt;T&gt;</a></li><li><a href="#impl-From%3CT%3E-for-T">From&lt;T&gt;</a></li><li><a href="#impl-Into%3CU%3E-for-T">Into&lt;U&gt;</a></li><li><a href="#impl-TryFrom%3CU%3E-for-T">TryFrom&lt;U&gt;</a></li><li><a href="#impl-TryInto%3CU%3E-for-T">TryInto&lt;U&gt;</a></li></ul></section><h2><a href="index.html">In crate imxrt_usbd</a></h2></div></nav><div class="sidebar-resizer"></div>
    <main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><div id="sidebar-button" tabindex="-1"><a href="../imxrt_usbd/all.html" title="show sidebar"></a></div><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" tabindex="-1"><a href="../help.html" title="help">?</a></div><div id="settings-menu" tabindex="-1"><a href="../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Struct <a href="index.html">imxrt_usbd</a>::<wbr><a class="struct" href="#">BusAdapter</a><button id="copy-path" title="Copy item path to clipboard"><img src="../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="src" href="../src/imxrt_usbd/bus.rs.html#110-113">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><pre class="rust item-decl"><code>pub struct BusAdapter { <span class="comment">/* private fields */</span> }</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>A full- and high-speed <code>UsbBus</code> implementation</p>
<p>The <code>BusAdapter</code> adapts the USB peripheral instances, and exposes a <code>UsbBus</code> implementation.</p>
<h2 id="requirements"><a class="doc-anchor" href="#requirements">§</a>Requirements</h2>
<p>The driver assumes that you’ve prepared all USB clocks (CCM clock gates, CCM analog PLLs).</p>
<p>Before polling for USB class traffic, you must call <a href="struct.BusAdapter.html#method.configure" title="method imxrt_usbd::BusAdapter::configure"><code>configure()</code></a>
<em>after</em> your device has been configured. This can be accomplished by polling the USB
device and checking its state until it’s been configured. Once configured, use <code>UsbDevice::bus()</code>
to access the i.MX RT <code>BusAdapter</code>, and call <code>configure()</code>. You should only do this once.
After that, you may poll for class traffic.</p>
<h2 id="example"><a class="doc-anchor" href="#example">§</a>Example</h2>
<p>This example shows you how to create a <code>BusAdapter</code>, build a simple USB device, and
prepare the device for class traffic.</p>
<p>Note that this example does not demonstrate USB class allocation or polling. See
your USB class’ documentation for details. This example also skips the clock initialization.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>imxrt_usbd::BusAdapter;

<span class="kw">static </span>EP_MEMORY: imxrt_usbd::EndpointMemory&lt;<span class="number">1024</span>&gt; = imxrt_usbd::EndpointMemory::new();
<span class="kw">static </span>EP_STATE: imxrt_usbd::EndpointState = imxrt_usbd::EndpointState::max_endpoints();

<span class="comment">// TODO initialize clocks...

</span><span class="kw">let </span>my_usb_peripherals = <span class="comment">// Your Peripherals instance...
</span><span class="kw">let </span>bus_adapter = BusAdapter::new(
    my_usb_peripherals,
    <span class="kw-2">&amp;</span>EP_MEMORY,
    <span class="kw-2">&amp;</span>EP_STATE,
);

<span class="comment">// Create the USB device...
</span><span class="kw">use </span>usb_device::prelude::<span class="kw-2">*</span>;
<span class="kw">let </span>bus_allocator = usb_device::bus::UsbBusAllocator::new(bus_adapter);
<span class="kw">let </span><span class="kw-2">mut </span>device = UsbDeviceBuilder::new(<span class="kw-2">&amp;</span>bus_allocator, UsbVidPid(<span class="number">0x5824</span>, <span class="number">0x27dd</span>))
    .strings(<span class="kw-2">&amp;</span>[StringDescriptors::default().product(<span class="string">"imxrt-usbd"</span>)]).unwrap()
    <span class="comment">// Other builder methods...
    </span>.build();

<span class="comment">// Poll until configured...
</span><span class="kw">loop </span>{
    <span class="kw">if </span>device.poll(<span class="kw-2">&amp;mut </span>[]) {
        <span class="kw">let </span>state = device.state();
        <span class="kw">if </span>state == usb_device::device::UsbDeviceState::Configured {
            <span class="kw">break</span>;
        }
    }
}

<span class="comment">// Configure the bus
</span>device.bus().configure();

<span class="comment">// Ready for class traffic!</span></code></pre></div>
<h2 id="design"><a class="doc-anchor" href="#design">§</a>Design</h2>
<p>This section talks about the driver design. It assumes that
you’re familiar with the details of the i.MX RT USB peripheral. If you
just want to use the driver, you can skip this section.</p>
<h3 id="packets-and-transfers"><a class="doc-anchor" href="#packets-and-transfers">§</a>Packets and transfers</h3>
<p>All i.MX RT USB drivers manage queue heads (QH), and transfer
descriptors (TD). For the driver, each (QH) is assigned
only one (TD) to perform I/O. We then assume each TD describes a single
packet. This is simple to implement, but it means that the
driver can only have one packet in flight per endpoint. You’re expected
to quickly respond to <code>poll()</code> outputs, and schedule the next transfer
in the time required for devices. This becomes more important as you
increase driver speeds.</p>
<p>The hardware can zero-length terminate (ZLT) packets as needed if you
call <a href="struct.BusAdapter.html#method.enable_zlt" title="method imxrt_usbd::BusAdapter::enable_zlt"><code>enable_zlt</code></a>. By default, this feature is
off, because most <code>usb-device</code> classes / devices take care to send zero-length
packets, and enabling this feature could interfere with the class / device
behaviors.</p>
</div></details><h2 id="implementations" class="section-header">Implementations<a href="#implementations" class="anchor">§</a></h2><div id="implementations-list"><details class="toggle implementors-toggle" open><summary><section id="impl-BusAdapter" class="impl"><a class="src rightside" href="../src/imxrt_usbd/bus.rs.html#115-279">source</a><a href="#impl-BusAdapter" class="anchor">§</a><h3 class="code-header">impl <a class="struct" href="struct.BusAdapter.html" title="struct imxrt_usbd::BusAdapter">BusAdapter</a></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.new" class="method"><a class="src rightside" href="../src/imxrt_usbd/bus.rs.html#124-130">source</a><h4 class="code-header">pub fn <a href="#method.new" class="fn">new</a>&lt;P: <a class="trait" href="trait.Peripherals.html" title="trait imxrt_usbd::Peripherals">Peripherals</a>, const SIZE: <a class="primitive" href="https://doc.rust-lang.org/1.78.0/core/primitive.usize.html">usize</a>, const EP_COUNT: <a class="primitive" href="https://doc.rust-lang.org/1.78.0/core/primitive.usize.html">usize</a>&gt;(
    peripherals: P,
    buffer: &amp;'static <a class="struct" href="struct.EndpointMemory.html" title="struct imxrt_usbd::EndpointMemory">EndpointMemory</a>&lt;SIZE&gt;,
    state: &amp;'static <a class="struct" href="struct.EndpointState.html" title="struct imxrt_usbd::EndpointState">EndpointState</a>&lt;EP_COUNT&gt;
) -&gt; Self</h4></section></summary><div class="docblock"><p>Create a high-speed USB bus adapter</p>
<p>This is equivalent to <a href="struct.BusAdapter.html#method.with_speed" title="associated function imxrt_usbd::BusAdapter::with_speed"><code>BusAdapter::with_speed</code></a> when supplying <a href="enum.Speed.html#variant.High" title="variant imxrt_usbd::Speed::High"><code>Speed::High</code></a>. See
the <code>with_speed</code> documentation for more information.</p>
<h5 id="panics"><a class="doc-anchor" href="#panics">§</a>Panics</h5>
<p>Panics if <code>buffer</code> or <code>state</code> has already been associated with another USB bus.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.with_speed" class="method"><a class="src rightside" href="../src/imxrt_usbd/bus.rs.html#146-153">source</a><h4 class="code-header">pub fn <a href="#method.with_speed" class="fn">with_speed</a>&lt;P: <a class="trait" href="trait.Peripherals.html" title="trait imxrt_usbd::Peripherals">Peripherals</a>, const SIZE: <a class="primitive" href="https://doc.rust-lang.org/1.78.0/core/primitive.usize.html">usize</a>, const EP_COUNT: <a class="primitive" href="https://doc.rust-lang.org/1.78.0/core/primitive.usize.html">usize</a>&gt;(
    peripherals: P,
    buffer: &amp;'static <a class="struct" href="struct.EndpointMemory.html" title="struct imxrt_usbd::EndpointMemory">EndpointMemory</a>&lt;SIZE&gt;,
    state: &amp;'static <a class="struct" href="struct.EndpointState.html" title="struct imxrt_usbd::EndpointState">EndpointState</a>&lt;EP_COUNT&gt;,
    speed: <a class="enum" href="enum.Speed.html" title="enum imxrt_usbd::Speed">Speed</a>
) -&gt; Self</h4></section></summary><div class="docblock"><p>Create a USB bus adapter with the given speed</p>
<p>Specify <a href="enum.Speed.html#variant.LowFull" title="variant imxrt_usbd::Speed::LowFull"><code>Speed::LowFull</code></a> to throttle the USB data rate.</p>
<p>When this function returns, the <code>BusAdapter</code> has initialized the PHY and USB core peripherals.
The adapter expects to own these two peripherals, along with the other peripherals required
by the <a href="trait.Peripherals.html" title="trait imxrt_usbd::Peripherals"><code>Peripherals</code></a> safety contract.</p>
<p>You must also provide a region of memory that will used for endpoint I/O. The
memory region will be partitioned for the endpoints, based on their requirements.</p>
<h5 id="panics-1"><a class="doc-anchor" href="#panics-1">§</a>Panics</h5>
<p>Panics if <code>buffer</code> or <code>state</code> has already been associated with another USB bus.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.without_critical_sections" class="method"><a class="src rightside" href="../src/imxrt_usbd/bus.rs.html#169-188">source</a><h4 class="code-header">pub unsafe fn <a href="#method.without_critical_sections" class="fn">without_critical_sections</a>&lt;P: <a class="trait" href="trait.Peripherals.html" title="trait imxrt_usbd::Peripherals">Peripherals</a>, const SIZE: <a class="primitive" href="https://doc.rust-lang.org/1.78.0/core/primitive.usize.html">usize</a>, const EP_COUNT: <a class="primitive" href="https://doc.rust-lang.org/1.78.0/core/primitive.usize.html">usize</a>&gt;(
    peripherals: P,
    buffer: &amp;'static <a class="struct" href="struct.EndpointMemory.html" title="struct imxrt_usbd::EndpointMemory">EndpointMemory</a>&lt;SIZE&gt;,
    state: &amp;'static <a class="struct" href="struct.EndpointState.html" title="struct imxrt_usbd::EndpointState">EndpointState</a>&lt;EP_COUNT&gt;,
    speed: <a class="enum" href="enum.Speed.html" title="enum imxrt_usbd::Speed">Speed</a>
) -&gt; Self</h4></section></summary><div class="docblock"><p>Create a USB bus adapter that never takes a critical section</p>
<p>See <a href="struct.BusAdapter.html#method.with_speed" title="associated function imxrt_usbd::BusAdapter::with_speed"><code>BusAdapter::with_speed</code></a> for general information.</p>
<h5 id="safety"><a class="doc-anchor" href="#safety">§</a>Safety</h5>
<p>The returned object fakes its <code>Sync</code> safety. Specifically, the object
will not take critical sections in its <code>&amp;[mut] self</code> methods to ensure safe
access. By using this object, you must manually hold the guarantees of
<code>Sync</code> without the compiler’s help.</p>
<h5 id="panics-2"><a class="doc-anchor" href="#panics-2">§</a>Panics</h5>
<p>Panics if <code>buffer</code> or <code>state</code> has already been associated with another USB bus.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.set_interrupts" class="method"><a class="src rightside" href="../src/imxrt_usbd/bus.rs.html#210-212">source</a><h4 class="code-header">pub fn <a href="#method.set_interrupts" class="fn">set_interrupts</a>(&amp;self, interrupts: <a class="primitive" href="https://doc.rust-lang.org/1.78.0/core/primitive.bool.html">bool</a>)</h4></section></summary><div class="docblock"><p>Enable (<code>true</code>) or disable (<code>false</code>) interrupts for this USB peripheral</p>
<p>The interrupt causes are implementation specific. To handle the interrupt,
call <a href="struct.BusAdapter.html#method.poll" title="method imxrt_usbd::BusAdapter::poll"><code>poll()</code></a>.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.enable_zlt" class="method"><a class="src rightside" href="../src/imxrt_usbd/bus.rs.html#223-225">source</a><h4 class="code-header">pub fn <a href="#method.enable_zlt" class="fn">enable_zlt</a>(&amp;self, ep_addr: EndpointAddress)</h4></section></summary><div class="docblock"><p>Enable zero-length termination (ZLT) for the given endpoint</p>
<p>When ZLT is enabled, software does not need to send a zero-length packet
to terminate a transfer where the number of bytes equals the max packet size.
The hardware will send this zero-length packet itself. By default, ZLT is off,
and software is expected to send these packets. Enable this if you’re confident
that your (third-party) device / USB class isn’t already sending these packets.</p>
<p>This call does nothing if the endpoint isn’t allocated.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.configure" class="method"><a class="src rightside" href="../src/imxrt_usbd/bus.rs.html#260-265">source</a><h4 class="code-header">pub fn <a href="#method.configure" class="fn">configure</a>(&amp;self)</h4></section></summary><div class="docblock"><p>Apply device configurations, and perform other post-configuration actions</p>
<p>You must invoke this once, and only after your device has been configured. If
the device is reset and reconfigured, you must invoke <code>configure()</code> again. See
the top-level example for how this could be achieved.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.gpt_mut" class="method"><a class="src rightside" href="../src/imxrt_usbd/bus.rs.html#276-278">source</a><h4 class="code-header">pub fn <a href="#method.gpt_mut" class="fn">gpt_mut</a>&lt;R&gt;(
    &amp;self,
    instance: <a class="enum" href="gpt/enum.Instance.html" title="enum imxrt_usbd::gpt::Instance">Instance</a>,
    func: impl <a class="trait" href="https://doc.rust-lang.org/1.78.0/core/ops/function/trait.FnOnce.html" title="trait core::ops::function::FnOnce">FnOnce</a>(&amp;mut <a class="struct" href="gpt/struct.Gpt.html" title="struct imxrt_usbd::gpt::Gpt">Gpt</a>&lt;'_&gt;) -&gt; R
) -&gt; R</h4></section></summary><div class="docblock"><p>Acquire one of the GPT timer instances.</p>
<p><code>instance</code> identifies which GPT instance you’re accessing.
This may take a critical section for the duration of <code>func</code>.</p>
<h5 id="panics-3"><a class="doc-anchor" href="#panics-3">§</a>Panics</h5>
<p>Panics if the GPT instance is already borrowed. This could happen
if you call <code>gpt_mut</code> again within the <code>func</code> callback.</p>
</div></details></div></details></div><h2 id="trait-implementations" class="section-header">Trait Implementations<a href="#trait-implementations" class="anchor">§</a></h2><div id="trait-implementations-list"><details class="toggle implementors-toggle" open><summary><section id="impl-UsbBus-for-BusAdapter" class="impl"><a class="src rightside" href="../src/imxrt_usbd/bus.rs.html#281-418">source</a><a href="#impl-UsbBus-for-BusAdapter" class="anchor">§</a><h3 class="code-header">impl UsbBus for <a class="struct" href="struct.BusAdapter.html" title="struct imxrt_usbd::BusAdapter">BusAdapter</a></h3></section></summary><div class="impl-items"><details class="toggle" open><summary><section id="associatedconstant.QUIRK_SET_ADDRESS_BEFORE_STATUS" class="associatedconstant trait-impl"><a class="src rightside" href="../src/imxrt_usbd/bus.rs.html#288">source</a><a href="#associatedconstant.QUIRK_SET_ADDRESS_BEFORE_STATUS" class="anchor">§</a><h4 class="code-header">const <a class="constant">QUIRK_SET_ADDRESS_BEFORE_STATUS</a>: <a class="primitive" href="https://doc.rust-lang.org/1.78.0/core/primitive.bool.html">bool</a> = true</h4></section></summary><div class="docblock"><p>The USB hardware can guarantee that we set the status before we receive
the status, and we’re taking advantage of that. We expect this flag to
result in a call to set_address before the status happens. This means
that we can meet the timing requirements without help from software.</p>
<p>It’s not a quirk; it’s a feature :)</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.alloc_ep" class="method trait-impl"><a class="src rightside" href="../src/imxrt_usbd/bus.rs.html#290-323">source</a><a href="#method.alloc_ep" class="anchor">§</a><h4 class="code-header">fn <a class="fn">alloc_ep</a>(
    &amp;mut self,
    ep_dir: UsbDirection,
    ep_addr: <a class="enum" href="https://doc.rust-lang.org/1.78.0/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;EndpointAddress&gt;,
    ep_type: EndpointType,
    max_packet_size: <a class="primitive" href="https://doc.rust-lang.org/1.78.0/core/primitive.u16.html">u16</a>,
    _interval: <a class="primitive" href="https://doc.rust-lang.org/1.78.0/core/primitive.u8.html">u8</a>
) -&gt; Result&lt;EndpointAddress&gt;</h4></section></summary><div class='docblock'>Allocates an endpoint and specified endpoint parameters. This method is called by the device
and class implementations to allocate endpoints, and can only be called before
<a href="UsbBus::enable"><code>enable</code></a> is called. <a>Read more</a></div></details><details class="toggle method-toggle" open><summary><section id="method.set_device_address" class="method trait-impl"><a class="src rightside" href="../src/imxrt_usbd/bus.rs.html#325-329">source</a><a href="#method.set_device_address" class="anchor">§</a><h4 class="code-header">fn <a class="fn">set_device_address</a>(&amp;self, addr: <a class="primitive" href="https://doc.rust-lang.org/1.78.0/core/primitive.u8.html">u8</a>)</h4></section></summary><div class='docblock'>Sets the device USB address to <code>addr</code>.</div></details><details class="toggle method-toggle" open><summary><section id="method.enable" class="method trait-impl"><a class="src rightside" href="../src/imxrt_usbd/bus.rs.html#331-333">source</a><a href="#method.enable" class="anchor">§</a><h4 class="code-header">fn <a class="fn">enable</a>(&amp;mut self)</h4></section></summary><div class='docblock'>Enables and initializes the USB peripheral. Soon after enabling the device will be reset, so
there is no need to perform a USB reset in this method.</div></details><details class="toggle method-toggle" open><summary><section id="method.reset" class="method trait-impl"><a class="src rightside" href="../src/imxrt_usbd/bus.rs.html#335-339">source</a><a href="#method.reset" class="anchor">§</a><h4 class="code-header">fn <a class="fn">reset</a>(&amp;self)</h4></section></summary><div class='docblock'>Called when the host resets the device. This will be soon called after
<a href="crate::device::UsbDevice::poll"><code>poll</code></a> returns [<code>PollResult::Reset</code>]. This method should
reset the state of all endpoints and peripheral flags back to a state suitable for
enumeration, as well as ensure that all endpoints previously allocated with alloc_ep are
initialized as specified.</div></details><details class="toggle method-toggle" open><summary><section id="method.write" class="method trait-impl"><a class="src rightside" href="../src/imxrt_usbd/bus.rs.html#341-366">source</a><a href="#method.write" class="anchor">§</a><h4 class="code-header">fn <a class="fn">write</a>(&amp;self, ep_addr: EndpointAddress, buf: &amp;[<a class="primitive" href="https://doc.rust-lang.org/1.78.0/core/primitive.u8.html">u8</a>]) -&gt; Result&lt;<a class="primitive" href="https://doc.rust-lang.org/1.78.0/core/primitive.usize.html">usize</a>&gt;</h4></section></summary><div class='docblock'>Writes a single packet of data to the specified endpoint and returns number of bytes
actually written. <a>Read more</a></div></details><details class="toggle method-toggle" open><summary><section id="method.read" class="method trait-impl"><a class="src rightside" href="../src/imxrt_usbd/bus.rs.html#368-393">source</a><a href="#method.read" class="anchor">§</a><h4 class="code-header">fn <a class="fn">read</a>(&amp;self, ep_addr: EndpointAddress, buf: &amp;mut [<a class="primitive" href="https://doc.rust-lang.org/1.78.0/core/primitive.u8.html">u8</a>]) -&gt; Result&lt;<a class="primitive" href="https://doc.rust-lang.org/1.78.0/core/primitive.usize.html">usize</a>&gt;</h4></section></summary><div class='docblock'>Reads a single packet of data from the specified endpoint and returns the actual length of
the packet. <a>Read more</a></div></details><details class="toggle method-toggle" open><summary><section id="method.set_stalled" class="method trait-impl"><a class="src rightside" href="../src/imxrt_usbd/bus.rs.html#395-401">source</a><a href="#method.set_stalled" class="anchor">§</a><h4 class="code-header">fn <a class="fn">set_stalled</a>(&amp;self, ep_addr: EndpointAddress, stalled: <a class="primitive" href="https://doc.rust-lang.org/1.78.0/core/primitive.bool.html">bool</a>)</h4></section></summary><div class='docblock'>Sets or clears the STALL condition for an endpoint. If the endpoint is an OUT endpoint, it
should be prepared to receive data again.</div></details><details class="toggle method-toggle" open><summary><section id="method.is_stalled" class="method trait-impl"><a class="src rightside" href="../src/imxrt_usbd/bus.rs.html#403-405">source</a><a href="#method.is_stalled" class="anchor">§</a><h4 class="code-header">fn <a class="fn">is_stalled</a>(&amp;self, ep_addr: EndpointAddress) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.78.0/core/primitive.bool.html">bool</a></h4></section></summary><div class='docblock'>Gets whether the STALL condition is set for an endpoint.</div></details><details class="toggle method-toggle" open><summary><section id="method.suspend" class="method trait-impl"><a class="src rightside" href="../src/imxrt_usbd/bus.rs.html#407-409">source</a><a href="#method.suspend" class="anchor">§</a><h4 class="code-header">fn <a class="fn">suspend</a>(&amp;self)</h4></section></summary><div class='docblock'>Causes the USB peripheral to enter USB suspend mode, lowering power consumption and
preparing to detect a USB wakeup event. This will be called after
<a href="crate::device::UsbDevice::poll"><code>poll</code></a> returns [<code>PollResult::Suspend</code>]. The device will
continue be polled, and it shall return a value other than <code>Suspend</code> from <code>poll</code> when it no
longer detects the suspend condition.</div></details><details class="toggle method-toggle" open><summary><section id="method.resume" class="method trait-impl"><a class="src rightside" href="../src/imxrt_usbd/bus.rs.html#411-413">source</a><a href="#method.resume" class="anchor">§</a><h4 class="code-header">fn <a class="fn">resume</a>(&amp;self)</h4></section></summary><div class='docblock'>Resumes from suspend mode. This may only be called after the peripheral has been previously
suspended.</div></details><details class="toggle method-toggle" open><summary><section id="method.poll" class="method trait-impl"><a class="src rightside" href="../src/imxrt_usbd/bus.rs.html#415-417">source</a><a href="#method.poll" class="anchor">§</a><h4 class="code-header">fn <a class="fn">poll</a>(&amp;self) -&gt; PollResult</h4></section></summary><div class='docblock'>Gets information about events and incoming data. Usually called in a loop or from an
interrupt handler. See the [<code>PollResult</code>] struct for more information.</div></details><details class="toggle method-toggle" open><summary><section id="method.force_reset" class="method trait-impl"><a href="#method.force_reset" class="anchor">§</a><h4 class="code-header">fn <a class="fn">force_reset</a>(&amp;self) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.78.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.78.0/core/primitive.unit.html">()</a>, UsbError&gt;</h4></section></summary><div class='docblock'>Simulates a disconnect from the USB bus, causing the host to reset and re-enumerate the
device. <a>Read more</a></div></details></div></details></div><h2 id="synthetic-implementations" class="section-header">Auto Trait Implementations<a href="#synthetic-implementations" class="anchor">§</a></h2><div id="synthetic-implementations-list"><section id="impl-Freeze-for-BusAdapter" class="impl"><a href="#impl-Freeze-for-BusAdapter" class="anchor">§</a><h3 class="code-header">impl !<a class="trait" href="https://doc.rust-lang.org/1.78.0/core/marker/trait.Freeze.html" title="trait core::marker::Freeze">Freeze</a> for <a class="struct" href="struct.BusAdapter.html" title="struct imxrt_usbd::BusAdapter">BusAdapter</a></h3></section><section id="impl-RefUnwindSafe-for-BusAdapter" class="impl"><a href="#impl-RefUnwindSafe-for-BusAdapter" class="anchor">§</a><h3 class="code-header">impl !<a class="trait" href="https://doc.rust-lang.org/1.78.0/core/panic/unwind_safe/trait.RefUnwindSafe.html" title="trait core::panic::unwind_safe::RefUnwindSafe">RefUnwindSafe</a> for <a class="struct" href="struct.BusAdapter.html" title="struct imxrt_usbd::BusAdapter">BusAdapter</a></h3></section><section id="impl-Send-for-BusAdapter" class="impl"><a href="#impl-Send-for-BusAdapter" class="anchor">§</a><h3 class="code-header">impl <a class="trait" href="https://doc.rust-lang.org/1.78.0/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> for <a class="struct" href="struct.BusAdapter.html" title="struct imxrt_usbd::BusAdapter">BusAdapter</a></h3></section><section id="impl-Sync-for-BusAdapter" class="impl"><a href="#impl-Sync-for-BusAdapter" class="anchor">§</a><h3 class="code-header">impl <a class="trait" href="https://doc.rust-lang.org/1.78.0/core/marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a> for <a class="struct" href="struct.BusAdapter.html" title="struct imxrt_usbd::BusAdapter">BusAdapter</a></h3></section><section id="impl-Unpin-for-BusAdapter" class="impl"><a href="#impl-Unpin-for-BusAdapter" class="anchor">§</a><h3 class="code-header">impl <a class="trait" href="https://doc.rust-lang.org/1.78.0/core/marker/trait.Unpin.html" title="trait core::marker::Unpin">Unpin</a> for <a class="struct" href="struct.BusAdapter.html" title="struct imxrt_usbd::BusAdapter">BusAdapter</a></h3></section><section id="impl-UnwindSafe-for-BusAdapter" class="impl"><a href="#impl-UnwindSafe-for-BusAdapter" class="anchor">§</a><h3 class="code-header">impl !<a class="trait" href="https://doc.rust-lang.org/1.78.0/core/panic/unwind_safe/trait.UnwindSafe.html" title="trait core::panic::unwind_safe::UnwindSafe">UnwindSafe</a> for <a class="struct" href="struct.BusAdapter.html" title="struct imxrt_usbd::BusAdapter">BusAdapter</a></h3></section></div><h2 id="blanket-implementations" class="section-header">Blanket Implementations<a href="#blanket-implementations" class="anchor">§</a></h2><div id="blanket-implementations-list"><details class="toggle implementors-toggle"><summary><section id="impl-Any-for-T" class="impl"><a class="src rightside" href="https://doc.rust-lang.org/1.78.0/src/core/any.rs.html#140">source</a><a href="#impl-Any-for-T" class="anchor">§</a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/1.78.0/core/any/trait.Any.html" title="trait core::any::Any">Any</a> for T<div class="where">where
    T: 'static + ?<a class="trait" href="https://doc.rust-lang.org/1.78.0/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,</div></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.type_id" class="method trait-impl"><a class="src rightside" href="https://doc.rust-lang.org/1.78.0/src/core/any.rs.html#141">source</a><a href="#method.type_id" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.78.0/core/any/trait.Any.html#tymethod.type_id" class="fn">type_id</a>(&amp;self) -&gt; <a class="struct" href="https://doc.rust-lang.org/1.78.0/core/any/struct.TypeId.html" title="struct core::any::TypeId">TypeId</a></h4></section></summary><div class='docblock'>Gets the <code>TypeId</code> of <code>self</code>. <a href="https://doc.rust-lang.org/1.78.0/core/any/trait.Any.html#tymethod.type_id">Read more</a></div></details></div></details><details class="toggle implementors-toggle"><summary><section id="impl-Borrow%3CT%3E-for-T" class="impl"><a class="src rightside" href="https://doc.rust-lang.org/1.78.0/src/core/borrow.rs.html#208">source</a><a href="#impl-Borrow%3CT%3E-for-T" class="anchor">§</a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/1.78.0/core/borrow/trait.Borrow.html" title="trait core::borrow::Borrow">Borrow</a>&lt;T&gt; for T<div class="where">where
    T: ?<a class="trait" href="https://doc.rust-lang.org/1.78.0/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,</div></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.borrow" class="method trait-impl"><a class="src rightside" href="https://doc.rust-lang.org/1.78.0/src/core/borrow.rs.html#210">source</a><a href="#method.borrow" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.78.0/core/borrow/trait.Borrow.html#tymethod.borrow" class="fn">borrow</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.78.0/core/primitive.reference.html">&amp;T</a></h4></section></summary><div class='docblock'>Immutably borrows from an owned value. <a href="https://doc.rust-lang.org/1.78.0/core/borrow/trait.Borrow.html#tymethod.borrow">Read more</a></div></details></div></details><details class="toggle implementors-toggle"><summary><section id="impl-BorrowMut%3CT%3E-for-T" class="impl"><a class="src rightside" href="https://doc.rust-lang.org/1.78.0/src/core/borrow.rs.html#216">source</a><a href="#impl-BorrowMut%3CT%3E-for-T" class="anchor">§</a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/1.78.0/core/borrow/trait.BorrowMut.html" title="trait core::borrow::BorrowMut">BorrowMut</a>&lt;T&gt; for T<div class="where">where
    T: ?<a class="trait" href="https://doc.rust-lang.org/1.78.0/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,</div></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.borrow_mut" class="method trait-impl"><a class="src rightside" href="https://doc.rust-lang.org/1.78.0/src/core/borrow.rs.html#217">source</a><a href="#method.borrow_mut" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.78.0/core/borrow/trait.BorrowMut.html#tymethod.borrow_mut" class="fn">borrow_mut</a>(&amp;mut self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.78.0/core/primitive.reference.html">&amp;mut T</a></h4></section></summary><div class='docblock'>Mutably borrows from an owned value. <a href="https://doc.rust-lang.org/1.78.0/core/borrow/trait.BorrowMut.html#tymethod.borrow_mut">Read more</a></div></details></div></details><details class="toggle implementors-toggle"><summary><section id="impl-From%3CT%3E-for-T" class="impl"><a class="src rightside" href="https://doc.rust-lang.org/1.78.0/src/core/convert/mod.rs.html#765">source</a><a href="#impl-From%3CT%3E-for-T" class="anchor">§</a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/1.78.0/core/convert/trait.From.html" title="trait core::convert::From">From</a>&lt;T&gt; for T</h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.from" class="method trait-impl"><a class="src rightside" href="https://doc.rust-lang.org/1.78.0/src/core/convert/mod.rs.html#768">source</a><a href="#method.from" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.78.0/core/convert/trait.From.html#tymethod.from" class="fn">from</a>(t: T) -&gt; T</h4></section></summary><div class="docblock"><p>Returns the argument unchanged.</p>
</div></details></div></details><details class="toggle implementors-toggle"><summary><section id="impl-Into%3CU%3E-for-T" class="impl"><a class="src rightside" href="https://doc.rust-lang.org/1.78.0/src/core/convert/mod.rs.html#748-750">source</a><a href="#impl-Into%3CU%3E-for-T" class="anchor">§</a><h3 class="code-header">impl&lt;T, U&gt; <a class="trait" href="https://doc.rust-lang.org/1.78.0/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;U&gt; for T<div class="where">where
    U: <a class="trait" href="https://doc.rust-lang.org/1.78.0/core/convert/trait.From.html" title="trait core::convert::From">From</a>&lt;T&gt;,</div></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.into" class="method trait-impl"><a class="src rightside" href="https://doc.rust-lang.org/1.78.0/src/core/convert/mod.rs.html#758">source</a><a href="#method.into" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.78.0/core/convert/trait.Into.html#tymethod.into" class="fn">into</a>(self) -&gt; U</h4></section></summary><div class="docblock"><p>Calls <code>U::from(self)</code>.</p>
<p>That is, this conversion is whatever the implementation of
<code><a href="https://doc.rust-lang.org/1.78.0/core/convert/trait.From.html" title="trait core::convert::From">From</a>&lt;T&gt; for U</code> chooses to do.</p>
</div></details></div></details><details class="toggle implementors-toggle"><summary><section id="impl-TryFrom%3CU%3E-for-T" class="impl"><a class="src rightside" href="https://doc.rust-lang.org/1.78.0/src/core/convert/mod.rs.html#805-807">source</a><a href="#impl-TryFrom%3CU%3E-for-T" class="anchor">§</a><h3 class="code-header">impl&lt;T, U&gt; <a class="trait" href="https://doc.rust-lang.org/1.78.0/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;U&gt; for T<div class="where">where
    U: <a class="trait" href="https://doc.rust-lang.org/1.78.0/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;T&gt;,</div></h3></section></summary><div class="impl-items"><details class="toggle" open><summary><section id="associatedtype.Error" class="associatedtype trait-impl"><a href="#associatedtype.Error" class="anchor">§</a><h4 class="code-header">type <a href="https://doc.rust-lang.org/1.78.0/core/convert/trait.TryFrom.html#associatedtype.Error" class="associatedtype">Error</a> = <a class="enum" href="https://doc.rust-lang.org/1.78.0/core/convert/enum.Infallible.html" title="enum core::convert::Infallible">Infallible</a></h4></section></summary><div class='docblock'>The type returned in the event of a conversion error.</div></details><details class="toggle method-toggle" open><summary><section id="method.try_from" class="method trait-impl"><a class="src rightside" href="https://doc.rust-lang.org/1.78.0/src/core/convert/mod.rs.html#812">source</a><a href="#method.try_from" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.78.0/core/convert/trait.TryFrom.html#tymethod.try_from" class="fn">try_from</a>(value: U) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.78.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;T, &lt;T as <a class="trait" href="https://doc.rust-lang.org/1.78.0/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;U&gt;&gt;::<a class="associatedtype" href="https://doc.rust-lang.org/1.78.0/core/convert/trait.TryFrom.html#associatedtype.Error" title="type core::convert::TryFrom::Error">Error</a>&gt;</h4></section></summary><div class='docblock'>Performs the conversion.</div></details></div></details><details class="toggle implementors-toggle"><summary><section id="impl-TryInto%3CU%3E-for-T" class="impl"><a class="src rightside" href="https://doc.rust-lang.org/1.78.0/src/core/convert/mod.rs.html#790-792">source</a><a href="#impl-TryInto%3CU%3E-for-T" class="anchor">§</a><h3 class="code-header">impl&lt;T, U&gt; <a class="trait" href="https://doc.rust-lang.org/1.78.0/core/convert/trait.TryInto.html" title="trait core::convert::TryInto">TryInto</a>&lt;U&gt; for T<div class="where">where
    U: <a class="trait" href="https://doc.rust-lang.org/1.78.0/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;T&gt;,</div></h3></section></summary><div class="impl-items"><details class="toggle" open><summary><section id="associatedtype.Error-1" class="associatedtype trait-impl"><a href="#associatedtype.Error-1" class="anchor">§</a><h4 class="code-header">type <a href="https://doc.rust-lang.org/1.78.0/core/convert/trait.TryInto.html#associatedtype.Error" class="associatedtype">Error</a> = &lt;U as <a class="trait" href="https://doc.rust-lang.org/1.78.0/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;T&gt;&gt;::<a class="associatedtype" href="https://doc.rust-lang.org/1.78.0/core/convert/trait.TryFrom.html#associatedtype.Error" title="type core::convert::TryFrom::Error">Error</a></h4></section></summary><div class='docblock'>The type returned in the event of a conversion error.</div></details><details class="toggle method-toggle" open><summary><section id="method.try_into" class="method trait-impl"><a class="src rightside" href="https://doc.rust-lang.org/1.78.0/src/core/convert/mod.rs.html#797">source</a><a href="#method.try_into" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.78.0/core/convert/trait.TryInto.html#tymethod.try_into" class="fn">try_into</a>(self) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.78.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;U, &lt;U as <a class="trait" href="https://doc.rust-lang.org/1.78.0/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;T&gt;&gt;::<a class="associatedtype" href="https://doc.rust-lang.org/1.78.0/core/convert/trait.TryFrom.html#associatedtype.Error" title="type core::convert::TryFrom::Error">Error</a>&gt;</h4></section></summary><div class='docblock'>Performs the conversion.</div></details></div></details></div></section></div></main></body></html>